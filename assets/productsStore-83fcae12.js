import{l as s,d as e}from"./index-46537375.js";const{VITE_APP_URL:i,VITE_APP_PATH:a}={VITE_APP_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_PATH:"drmeme",VITE_APP_SPOTIFY_CLIENT_ID:"6ae98659652a4d86a9c6ca300f595a21",VITE_APP_SPOTIFY_CLIENT_SECRET:"08d3edfa0ca14a7382d7b286ac6b13c3",BASE_URL:"/drmeme/",MODE:"production",DEV:!1,PROD:!0},r=s("productsStore",{state:()=>({isFirstLoad:!0,products:[],categories:["全部商品","服飾","配件飾品","其他"],currentCategory:"全部商品",isLoading:!0,pageNum:1,pagination:{},followList:[]}),actions:{getProducts(t=1){this.isLoading=!0,this.pageNum=t,e.get(`${i}/api/${a}/products?page=${this.pageNum}&category=${this.currentCategory==="全部商品"?"":this.currentCategory}`).then(o=>{console.log(o),this.products=o.data.products,this.pagination=o.data.pagination,this.isLoading=!1,this.isFirstLoad?this.isFirstLoad=!1:this.scrollToProductsBlock()}).catch(o=>{console.log(o.response.data.message,"error"),this.isLoading=!1})},scrollToProductsBlock(){const t=document.querySelector("#products-block");t&&t.scrollIntoView({behavior:"smooth",block:"start"})},changeCategory(t){this.currentCategory!==t&&(this.currentCategory=t,this.getProducts())},toggleFollowProduct(t){if(this.followList.includes(t)){const o=this.followList.indexOf(t);this.followList.splice(o,1)}else this.followList.push(t);localStorage.setItem("followList",JSON.stringify(this.followList))},getFollowList(){this.followList=JSON.parse(localStorage.getItem("followList"))||[],console.log("followList",this.followList)}}});export{r as u};
