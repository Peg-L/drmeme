import{P as x}from"./ProgressbarComponent-b688a1e7.js";import{u as i}from"./cartStore-756abf7d.js";import{f as b,m as f,_ as y,o as e,c as n,b as t,F as I,i as N,t as a,k as C,s as S,u as T,x as V,a as c,j as _,w as j,y as P,z as q,h as A,r as p,q as m}from"./index-2c2a8a23.js";const B={data(){return{}},computed:{...b(i,["carts"])},methods:{...f(i,["getCarts","updateCartItemQty","deleteCartItem","deleteAllCarts"])},mounted(){this.getCarts()}},d=s=>(S("data-v-977e7f1e"),s=s(),T(),s),L={class:"table"},M={class:"bg-secondary-100"},Q=d(()=>t("th",null,null,-1)),R=d(()=>t("th",null,"商品名稱",-1)),z=d(()=>t("th",null,"單價",-1)),D=d(()=>t("th",null,"數量",-1)),F=d(()=>t("th",null,"小計",-1)),K=["src"],U={class:"border d-inline-block rounded-2"},E=["onClick"],W=d(()=>t("i",{class:"fa-solid fa-minus"},null,-1)),X=[W],G={class:"px-4"},H=["onClick"],J=d(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),O=[J],Y=["onClick"],Z=d(()=>t("tfoot",null,null,-1));function tt(s,l,$,g,k,v){return e(),n("table",L,[t("thead",null,[t("tr",M,[Q,R,z,D,F,t("th",null,[t("button",{class:"btn btn-outline-primary-500 button-hover",type:"button",onClick:l[0]||(l[0]=o=>s.deleteAllCarts())}," 全部刪除 ")])])]),t("tbody",null,[s.carts?(e(!0),n(I,{key:0},N(s.carts,o=>(e(),n("tr",{class:"align-middle",key:o.id},[t("td",null,[t("img",{class:"cart-image",src:o.product.imageUrl,alt:"短袖上衣"},null,8,K)]),t("td",null,a(o.product.title),1),t("td",null,"NT$ "+a(o.product.price),1),t("td",null,[t("div",U,[t("button",{type:"button",class:"btn btn-sm",onClick:u=>s.updateCartItemQty(o,"minus")},X,8,E),t("span",G,a(o.qty),1),t("button",{type:"button",class:"btn btn-sm",onClick:u=>s.updateCartItemQty(o,"plus")},O,8,H)])]),t("td",null,"NT$ "+a(o.product.price*o.qty),1),t("td",null,[t("button",{type:"button",class:"btn text-primary-500",onClick:u=>s.deleteCartItem(o)}," X ",8,Y)])]))),128)):C("",!0)]),Z])}const st=y(B,[["render",tt],["__scopeId","data-v-977e7f1e"]]),ot="/drmeme/assets/empty-cart-meme-3a6dbd39.png",et={components:{ProgressbarComponent:x,CartlistComponent:st},data(){return{tempProduct:{},productId:"",loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...b(i,["carts","total","final_total"]),...V(i,["temp_code","coupon_code","coupon_title","coupon_success","coupon_error"])},methods:{...f(i,["getCarts","useCoupon"])},mounted(){this.getCarts()}},nt={key:0,class:"d-flex flex-column flex-md-row justify-content-md-center align-items-center gap-md-14"},lt=t("img",{src:ot,alt:"empty cart",style:{width:"300px"}},null,-1),at={class:"d-flex flex-column align-items-md-start"},dt=t("p",{class:"fs-5 mt-6 fw-bold"},"您的購物車中沒有商品",-1),rt={key:1,class:"row justify-content-center"},ct={class:"col-12 col-md-10"},it={class:"d-flex justify-content-between my-10"},ut=t("p",{class:"fs-6 fw-bold"},"優惠券",-1),pt={class:"input-group my-2"},_t={key:0,class:"fs-7 ms-2 mt-2"},mt={key:1,class:"fs-7 ms-2 text-danger"},ht={key:2},bt={class:"table table-borderless w-auto mb-0"},ft={key:0},yt=t("th",{class:"px-5",scope:"row"},"共 3 件商品",-1),Ct=t("td",{class:"px-5"},"商品金額",-1),$t={class:"px-5"},gt=t("th",{class:"px-5",scope:"row"},null,-1),kt=t("td",{class:"px-5"},"商品折扣",-1),vt={class:"px-5"},wt=t("th",{class:"px-5",scope:"row"},null,-1),xt=t("td",{class:"px-5 fs-4 fw-bold"},"總計",-1),It={class:"px-5 fs-4 text-danger fw-bold"},Nt={class:"d-flex justify-content-between"},St=t("i",{class:"fa-solid fa-caret-left me-2"},null,-1),Tt=t("i",{class:"fa-solid fa-caret-right ms-2"},null,-1);function Vt(s,l,$,g,k,v){const o=p("router-link"),u=p("ProgressbarComponent"),w=p("CartlistComponent"),h=p("RouterLink");return e(),n("div",{class:A(["container",s.carts.length==0?"py-15 py-md-30":"py-6 py-md-10"])},[s.carts.length==0?(e(),n("div",nt,[lt,t("div",at,[dt,c(o,{to:"/products",class:"btn btn-primary-500 text-light mt-2 fs-6 fw-bold","aria-current":"page"},{default:_(()=>[m("前往購物")]),_:1})])])):(e(),n("div",rt,[c(u,{currentStatus:1}),t("div",ct,[c(w),t("div",it,[t("div",null,[ut,t("div",pt,[j(t("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":l[0]||(l[0]=r=>s.temp_code=r),onKeyup:l[1]||(l[1]=q((...r)=>s.useCoupon&&s.useCoupon(...r),["enter"]))},null,544),[[P,s.temp_code]]),t("button",{class:"btn btn-primary-500 text-light",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=(...r)=>s.useCoupon&&s.useCoupon(...r))}," 使用 ")]),s.coupon_success?(e(),n("p",_t," 已套用優惠券: "+a(s.coupon_title+s.coupon_code),1)):s.coupon_error?(e(),n("p",mt," 無此優惠碼，請重新輸入 ")):(e(),n("p",ht))]),t("table",bt,[s.carts?(e(),n("tbody",ft,[t("tr",null,[yt,Ct,t("td",$t,"NT$ "+a(s.total),1)]),t("tr",null,[gt,kt,t("td",vt," NT$ - "+a(s.total-Math.round(s.final_total)),1)]),t("tr",null,[wt,xt,t("td",It," NT$ "+a(Math.round(s.final_total)),1)])])):C("",!0)])]),t("div",Nt,[c(h,{class:"btn btn-outline-primary-500 button-hover fw-bold",type:"button",to:"/products"},{default:_(()=>[St,m("繼續購物 ")]),_:1}),c(h,{class:"btn btn-primary-500 text-light fw-bold",type:"button",to:"/order"},{default:_(()=>[m(" 下一步"),Tt]),_:1})])])]))],2)}const At=y(et,[["render",Vt]]);export{At as default};
