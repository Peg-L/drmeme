import{P as x}from"./ProgressbarComponent-140429b4.js";import{u as c}from"./cartStore-0c53d4bb.js";import{f as b,m as f,_ as $,o as l,c as a,b as t,F as I,i as N,t as r,k as y,s as S,u as T,x as P,a as d,j as _,w as V,y as j,r as u,q as p}from"./index-46537375.js";import"./productsStore-83fcae12.js";const q={data(){return{}},computed:{...b(c,["carts"])},methods:{...f(c,["getCarts","updateCartItemQty","deleteCartItem","deleteAllCarts"])},mounted(){this.getCarts()}},n=s=>(S("data-v-097e8f04"),s=s(),T(),s),A={class:"table"},B={class:"bg-secondary-100"},L=n(()=>t("th",null,null,-1)),M=n(()=>t("th",null,"商品名稱",-1)),Q=n(()=>t("th",null,"單價",-1)),R=n(()=>t("th",null,"數量",-1)),D=n(()=>t("th",null,"小計",-1)),F=["src"],U={class:"border d-inline-block rounded-2"},E=["onClick"],W=n(()=>t("i",{class:"fa-solid fa-minus"},null,-1)),X=[W],z={class:"px-4"},G=["onClick"],H=n(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),J=[H],K=["onClick"],O=n(()=>t("tfoot",null,null,-1));function Y(s,e,C,g,v,k){return l(),a("table",A,[t("thead",null,[t("tr",B,[L,M,Q,R,D,t("th",null,[t("button",{class:"btn btn-outline-primary-500 button-hover",type:"button",onClick:e[0]||(e[0]=o=>s.deleteAllCarts())}," 清空購物車 ")])])]),t("tbody",null,[s.carts?(l(!0),a(I,{key:0},N(s.carts,o=>(l(),a("tr",{class:"align-middle",key:o.id},[t("td",null,[t("img",{class:"cart-image",src:o.product.imageUrl,alt:"短袖上衣"},null,8,F)]),t("td",null,r(o.product.title),1),t("td",null,"NT$ "+r(o.product.price),1),t("td",null,[t("div",U,[t("button",{type:"button",class:"btn btn-sm",onClick:i=>s.updateCartItemQty(o.id,"minus")},X,8,E),t("span",z,r(o.qty),1),t("button",{type:"button",class:"btn btn-sm",onClick:i=>s.updateCartItemQty(o.id,"plus")},J,8,G)])]),t("td",null,"NT$ "+r(o.product.price*o.qty),1),t("td",null,[t("button",{type:"button",class:"btn text-primary-500",onClick:i=>s.deleteCartItem(o)}," X ",8,K)])]))),128)):y("",!0)]),O])}const Z=$(q,[["render",Y],["__scopeId","data-v-097e8f04"]]),tt={components:{ProgressbarComponent:x,CartlistComponent:Z},data(){return{tempProduct:{},productId:"",loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...b(c,["carts","total","final_total"]),...P(c,["coupon_code"])},methods:{...f(c,["getCarts","useCoupon"]),isPhone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"需要正確的電話號碼"}},mounted(){this.getCarts()}},st={class:"container py-10"},ot={key:0},et=t("p",{class:"fs-5"},"您還沒購買任何商品",-1),nt={key:1,class:"row justify-content-center"},lt={class:"col-12 col-md-10"},at={class:"d-flex justify-content-between"},rt=t("p",{class:"fs-6 fw-bold"},"優惠券",-1),dt={class:"input-group my-2"},ct={class:"table table-borderless w-auto"},it={key:0},ut=t("th",{class:"px-5",scope:"row"},"共 3 件商品",-1),_t=t("td",{class:"px-5"},"商品金額",-1),pt={class:"px-5"},ht=t("th",{class:"px-5",scope:"row"},null,-1),mt=t("td",{class:"px-5"},"商品折扣",-1),bt={class:"px-5"},ft=t("th",{class:"px-5",scope:"row"},null,-1),$t=t("td",{class:"px-5 fs-4 fw-bold"},"總計",-1),yt={class:"px-5 fs-4 text-danger fw-bold"},Ct={class:"d-flex justify-content-between"},gt=t("i",{class:"fa-solid fa-caret-left me-2"},null,-1),vt=t("i",{class:"fa-solid fa-caret-right ms-2"},null,-1);function kt(s,e,C,g,v,k){const o=u("router-link"),i=u("ProgressbarComponent"),w=u("CartlistComponent"),h=u("RouterLink");return l(),a("div",st,[s.carts.length==0?(l(),a("div",ot,[et,d(o,{to:"/products",class:"btn btn-primary-500 text-light mt-3 fs-5 fw-bold","aria-current":"page"},{default:_(()=>[p("前往購買")]),_:1})])):(l(),a("div",nt,[d(i,{currentStatus:1}),t("div",lt,[d(w),t("div",at,[t("div",null,[rt,t("div",dt,[V(t("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":e[0]||(e[0]=m=>s.coupon_code=m)},null,512),[[j,s.coupon_code]]),t("button",{class:"btn btn-primary-500 text-light",type:"button",id:"button-addon2",onClick:e[1]||(e[1]=m=>s.useCoupon())}," 使用 ")])]),t("table",ct,[s.carts?(l(),a("tbody",it,[t("tr",null,[ut,_t,t("td",pt,"NT$ "+r(s.total),1)]),t("tr",null,[ht,mt,t("td",bt," NT$ - "+r(s.total-Math.round(s.final_total)),1)]),t("tr",null,[ft,$t,t("td",yt," NT$ "+r(Math.round(s.final_total)),1)])])):y("",!0)])]),t("div",Ct,[d(h,{class:"btn btn-outline-primary-500 button-hover fw-bold",type:"button",to:"/products"},{default:_(()=>[gt,p("繼續購物 ")]),_:1}),d(h,{class:"btn btn-primary-500 text-light fw-bold",type:"button",to:"/order"},{default:_(()=>[p(" 下一步"),vt]),_:1})])])]))])}const St=$(tt,[["render",kt]]);export{St as default};
