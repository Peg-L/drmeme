import{P as w}from"./ProgressbarComponent-d49a5a35.js";import{u as i}from"./cartStore-b414f6ef.js";import{m as h,j as b,_ as f,o as e,c as n,a as t,F as I,k as x,t as a,g as y,p as N,e as S,i as T,b as c,w as p,h as V,v as j,A as P,n as A,r as _,d as m}from"./index-567739fb.js";const B={data(){return{}},computed:{...h(i,["carts"])},methods:{...b(i,["getCarts","updateCartItemQty","deleteCartItem","deleteAllCarts"])},mounted(){this.getCarts()}},d=s=>(N("data-v-977e7f1e"),s=s(),S(),s),L={class:"table"},M={class:"bg-secondary-100"},Q=d(()=>t("th",null,null,-1)),R=d(()=>t("th",null,"商品名稱",-1)),q=d(()=>t("th",null,"單價",-1)),D=d(()=>t("th",null,"數量",-1)),F=d(()=>t("th",null,"小計",-1)),K=["src"],U={class:"border d-inline-block rounded-2"},z=["onClick"],E=d(()=>t("i",{class:"fa-solid fa-minus"},null,-1)),W=[E],X={class:"px-4"},G=["onClick"],H=d(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),J=[H],O=["onClick"],Y=d(()=>t("tfoot",null,null,-1));function Z(s,l,C,$,g,v){return e(),n("table",L,[t("thead",null,[t("tr",M,[Q,R,q,D,F,t("th",null,[t("button",{class:"btn btn-outline-primary-500 button-hover",type:"button",onClick:l[0]||(l[0]=o=>s.deleteAllCarts())}," 全部刪除 ")])])]),t("tbody",null,[s.carts?(e(!0),n(I,{key:0},x(s.carts,o=>(e(),n("tr",{class:"align-middle",key:o.id},[t("td",null,[t("img",{class:"cart-image",src:o.product.imageUrl,alt:"短袖上衣"},null,8,K)]),t("td",null,a(o.product.title),1),t("td",null,"NT$ "+a(o.product.price),1),t("td",null,[t("div",U,[t("button",{type:"button",class:"btn btn-sm",onClick:u=>s.updateCartItemQty(o,"minus")},W,8,z),t("span",X,a(o.qty),1),t("button",{type:"button",class:"btn btn-sm",onClick:u=>s.updateCartItemQty(o,"plus")},J,8,G)])]),t("td",null,"NT$ "+a(o.product.price*o.qty),1),t("td",null,[t("button",{type:"button",class:"btn text-primary-500",onClick:u=>s.deleteCartItem(o)}," X ",8,O)])]))),128)):y("",!0)]),Y])}const tt=f(B,[["render",Z],["__scopeId","data-v-977e7f1e"]]),st="/drmeme/assets/empty-cart-meme-3a6dbd39.png",ot={components:{ProgressbarComponent:w,CartlistComponent:tt},data(){return{tempProduct:{},productId:"",loadingItem:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...h(i,["carts","total","final_total"]),...T(i,["temp_code","coupon_code","coupon_title","coupon_success","coupon_error"])},methods:{...b(i,["getCarts","useCoupon"])},mounted(){this.getCarts()}},et={key:0,class:"d-flex flex-column flex-md-row justify-content-md-center align-items-center gap-md-14"},nt=t("img",{src:st,alt:"empty cart",style:{width:"300px"}},null,-1),lt={class:"d-flex flex-column align-items-md-start"},at=t("p",{class:"fs-5 mt-6 fw-bold"},"您的購物車中沒有商品",-1),dt={key:1,class:"row justify-content-center"},rt={class:"col-12 col-md-10"},ct={class:"d-flex justify-content-between my-10"},it=t("p",{class:"fs-6 fw-bold"},"優惠券",-1),ut={class:"input-group my-2"},pt={key:0,class:"fs-7 ms-2 mt-2"},_t={key:1,class:"fs-7 ms-2 text-danger"},mt={key:2},ht={class:"table table-borderless w-auto mb-0"},bt={key:0},ft=t("th",{class:"px-5",scope:"row"},"共 3 件商品",-1),yt=t("td",{class:"px-5"},"商品金額",-1),Ct={class:"px-5"},$t=t("th",{class:"px-5",scope:"row"},null,-1),gt=t("td",{class:"px-5"},"商品折扣",-1),vt={class:"px-5"},kt=t("th",{class:"px-5",scope:"row"},null,-1),wt=t("td",{class:"px-5 fs-4 fw-bold"},"總計",-1),It={class:"px-5 fs-4 text-danger fw-bold"},xt={class:"d-flex justify-content-between"},Nt=t("i",{class:"fa-solid fa-caret-left me-2"},null,-1),St=t("i",{class:"fa-solid fa-caret-right ms-2"},null,-1);function Tt(s,l,C,$,g,v){const o=_("RouterLink"),u=_("ProgressbarComponent"),k=_("CartlistComponent");return e(),n("div",{class:A(["container",s.carts.length==0?"py-15 py-md-30":"py-6 py-md-10"])},[s.carts.length==0?(e(),n("div",et,[nt,t("div",lt,[at,c(o,{to:"/products",class:"btn btn-primary-500 text-light mt-2 fs-6 fw-bold","aria-current":"page"},{default:p(()=>[m("前往購物")]),_:1})])])):(e(),n("div",dt,[c(u,{currentStatus:1}),t("div",rt,[c(k),t("div",ct,[t("div",null,[it,t("div",ut,[V(t("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":l[0]||(l[0]=r=>s.temp_code=r),onKeyup:l[1]||(l[1]=P((...r)=>s.useCoupon&&s.useCoupon(...r),["enter"]))},null,544),[[j,s.temp_code]]),t("button",{class:"btn btn-primary-500 text-light",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=(...r)=>s.useCoupon&&s.useCoupon(...r))}," 使用 ")]),s.coupon_success?(e(),n("p",pt," 已套用優惠券: "+a(s.coupon_title+s.coupon_code),1)):s.coupon_error?(e(),n("p",_t," 無此優惠碼，請重新輸入 ")):(e(),n("p",mt))]),t("table",ht,[s.carts?(e(),n("tbody",bt,[t("tr",null,[ft,yt,t("td",Ct,"NT$ "+a(s.total),1)]),t("tr",null,[$t,gt,t("td",vt," NT$ - "+a(s.total-Math.round(s.final_total)),1)]),t("tr",null,[kt,wt,t("td",It," NT$ "+a(Math.round(s.final_total)),1)])])):y("",!0)])]),t("div",xt,[c(o,{class:"btn btn-outline-primary-500 button-hover fw-bold",type:"button",to:"/products"},{default:p(()=>[Nt,m("繼續購物 ")]),_:1}),c(o,{class:"btn btn-primary-500 text-light fw-bold",type:"button",to:"/order"},{default:p(()=>[m(" 下一步"),St]),_:1})])])]))],2)}const At=f(ot,[["render",Tt]]);export{At as default};
