import{P as y}from"./ProgressbarComponent-ed69d7b8.js";import{_ as P,m as T,j as w,c as p,a as e,b as a,F as I,k as S,g as x,t as c,w as C,r as m,o as f,n as u,p as A,e as F,d as _}from"./index-c34ecdd2.js";import{u as V}from"./cartStore-1900c3c4.js";const{VITE_APP_URL:k,VITE_APP_PATH:N}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"drmeme",VITE_APP_SPOTIFY_CLIENT_ID:"6ae98659652a4d86a9c6ca300f595a21",VITE_APP_SPOTIFY_CLIENT_SECRET:"08d3edfa0ca14a7382d7b286ac6b13c3",BASE_URL:"/drmeme/",MODE:"production",DEV:!1,PROD:!0},q={data(){return{currentStatus:2,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{ProgressbarComponent:y},computed:{...T(V,["carts","final_total"])},methods:{...w(V,["getCarts","showToast"]),onSubmit(){const o=this.form;console.log(o),this.$http.post(`${k}/api/${N}/order`,{data:o}).then(s=>{const{message:b,orderId:h}=s.data;this.showToast(b),this.$refs.form.resetForm(),this.$router.push(`/payment/${h}`)}).catch(s=>{alert(s.response.data.message)})}},mounted(){this.getCarts()}},n=o=>(A("data-v-04258daf"),o=o(),F(),o),U={class:"container"},L={class:"row justify-content-center py-10"},M={class:"col-md-10"},O={class:"row justify-content-center align-items-start"},j={class:"col-lg-5 p-6 pb-2 d-flex flex-column justify-content-start"},D=n(()=>e("h2",{class:"fs-5 fw-bold mb-2"},"訂單明細",-1)),R={class:"mt-4"},B={class:"table fs-7"},H=["src","alt"],Y={class:"col-6"},$={class:"col-3 text-end"},z={class:"d-flex justify-content-between mt-6"},G=n(()=>e("div",{class:"px-5 fs-6 fw-bold"},"總計",-1)),J={class:"px-2 fs-6 fw-bold"},K={class:"col-lg-5 bg-secondary-100 p-6 rounded-3"},Q=n(()=>e("h2",{class:"fs-5 fw-bold mb-2"},"訂單資訊",-1)),W={class:"mb-3"},X=n(()=>e("label",{for:"inputName",class:"form-label"},[_("姓名 "),e("span",{class:"required"},"*")],-1)),Z={class:"mb-3"},ee=n(()=>e("label",{for:"inputTel",class:"form-label"},[_("手機 "),e("span",{class:"required"},"*")],-1)),se={class:"mb-3"},oe=n(()=>e("label",{for:"inputEmail",class:"form-label"},[_("Email "),e("span",{class:"required"},"*")],-1)),te={class:"mb-3"},le=n(()=>e("label",{for:"inputAddress",class:"form-label"},[_("地址 "),e("span",{class:"required"},"*")],-1)),ae={class:"mb-3"},re=n(()=>e("label",{for:"inputMsg",class:"form-label"},"備註",-1));function ne(o,s,b,h,r,v){const g=m("ProgressbarComponent"),d=m("VField"),i=m("ErrorMessage"),E=m("VForm");return f(),p("div",U,[e("div",L,[a(g,{currentStatus:2}),e("div",M,[e("div",O,[e("div",j,[D,e("div",R,[e("table",B,[e("tbody",null,[o.carts?(f(!0),p(I,{key:0},S(o.carts,t=>(f(),p("tr",{class:"align-middle",key:t.id},[e("td",null,[e("img",{class:"cart-image",src:t.product.imageUrl,alt:t.product.title},null,8,H)]),e("td",Y,c(t.product.title)+" x"+c(t.qty),1),e("td",$,"NT$ "+c(t.total),1)]))),128)):x("",!0)])])]),e("div",z,[G,e("div",J," NT$ "+c(Math.round(o.final_total)),1)])]),e("div",K,[Q,a(E,{ref:"form",class:"fs-7",onSubmit:v.onSubmit},{default:C(({errors:t})=>[e("div",W,[X,a(d,{rules:"required",name:"姓名",type:"text",id:"inputName",placeholder:"請填寫真實姓名",class:u(["form-control",{"is-invalid":t.姓名}]),modelValue:r.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=l=>r.form.user.name=l)},null,8,["class","modelValue"]),a(i,{name:"姓名",class:"invalid-feedback"})]),e("div",Z,[ee,a(d,{rules:{regex:/^09\d{8}$/,required:!0},name:"手機",type:"text",id:"inputTel",placeholder:"請填寫手機",class:u(["form-control",{"is-invalid":t.手機}]),modelValue:r.form.user.tel,"onUpdate:modelValue":s[1]||(s[1]=l=>r.form.user.tel=l)},null,8,["class","modelValue"]),a(i,{name:"手機",class:"invalid-feedback"})]),e("div",se,[oe,a(d,{rules:"email|required",name:"Email",type:"email",id:"inputEmail",placeholder:"請填寫 Email",class:u(["form-control",{"is-invalid":t.Email}]),modelValue:r.form.user.email,"onUpdate:modelValue":s[2]||(s[2]=l=>r.form.user.email=l)},null,8,["class","modelValue"]),a(i,{name:"Email",class:"invalid-feedback"})]),e("div",te,[le,a(d,{rules:"required",name:"地址",type:"text",id:"inputAddress",placeholder:"請填寫地址",class:u(["form-control",{"is-invalid":t.地址}]),modelValue:r.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=l=>r.form.user.address=l)},null,8,["class","modelValue"]),a(i,{name:"地址",class:"invalid-feedback"})]),e("div",ae,[re,a(d,{name:"備註",type:"text",id:"inputMsg",placeholder:"請填寫備註",class:"form-control",modelValue:r.form.message,"onUpdate:modelValue":s[4]||(s[4]=l=>r.form.message=l)},null,8,["modelValue"])]),e("button",{type:"submit",class:"btn btn-primary-500 text-light fw-bold w-100",onClick:s[5]||(s[5]=(...l)=>o.resetForm&&o.resetForm(...l))}," 提交訂單 ")]),_:1},8,["onSubmit"])])])])])])}const me=P(q,[["render",ne],["__scopeId","data-v-04258daf"]]);export{me as default};
